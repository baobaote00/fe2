<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>spin</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        :root {
            --clipPath: polygon(50% 50%, 0 21.13%, 0 78.86%);
        }

        .spin {
            position: absolute;
            width: 400px;
            height: 400px;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
        }

        .circle-1 {
            clip-path: circle(50% at 50% 50%);
            background-color: #5cb85c;
            width: 100%;
            height: 100%;
            /* animation: spin 2s linear infinite forwards; */
            position: absolute;
        }

        .item {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            clip-path: var(--clipPath);
            line-height: 400px;
        }

        .circle-2 {
            clip-path: circle(50% at 50% 50%);
            background-color: white;
            width: 100px;
            height: 100px;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
            position: absolute;
        }

        @keyframes spin {
            100% {
                transform: rotateZ(360deg);
            }
        }
    </style>
</head>

<body>
    <div class="spin">
        <div class="circle-1"></div>
        <div class="circle-2"></div>
    </div>
    <div class="test">
        <div>Nhập phần tử</div>
        <textarea name="input" id="value" cols="30" rows="10"></textarea>
    </div>
    <script>
        const input = document.querySelector('#value');
        const circle = document.querySelector('.circle-1');
        const color = ['#5cb85c', invertColor("#5cb85c"), '#ff0000', invertColor('#ff0000')];
        //tính tan
        function getTanFromDegrees(degrees) {
            return Math.tan(degrees * Math.PI / 180);
        }
        function invertColor(hexTripletColor) {
            var color = hexTripletColor;
            color = color.substring(1); // remove #
            color = parseInt(color, 16); // convert to integer
            color = 0xFFFFFF ^ color; // invert three bytes
            color = color.toString(16); // convert to hex
            color = ("000000" + color).slice(-6); // pad with leading zeros
            color = "#" + color; // prepend #
            return color;
        }
        //set event cho ô input
        input.addEventListener('input', inputValue);
        // input.addEventListener('blur' ,inputBlurAndPress)
        function inputValue(e) {
            //lấy giá trị hiện tại của ô input
            let value = e.key == 'Enter' ? input.value + '\n' : input.value;
            //xóa tất cả element
            console.table(value)
            circle.innerHTML = '';
            //cắt ra từng dòng
            value = value.split('\n');
            //chỉnh style cho clippath
            const rootStyle = document.documentElement.style;
            const degrees = 360 / (value.length * 2);
            const tanValue = getTanFromDegrees(degrees);
            const clipPathValue = value.length == 1 ? 'circle(50% at 50% 50%)' : `polygon(50% 50%, 0 ${50 - 50 * tanValue}%, 0 ${50 + 50 * tanValue}%)`;
            rootStyle.setProperty('--clipPath', clipPathValue);
            //tạo element
            for (let i = 0; i < value.length; i++) {
                circle.innerHTML += `<div class="item" style="background-color: ${color[i % 4]}; transform: rotateZ(${degrees * 2 * i}deg);">${value[i]}</div>`;
            }
        }
    </script>
</body>

</html>
